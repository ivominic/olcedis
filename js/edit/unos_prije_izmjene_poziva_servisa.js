/**Metode za unos podataka */

function sakrijSvaPoljaZaUnos() {
  document.querySelector("#divUnosGps").style.display = "none";
  document.querySelector("#divUnosBroj").style.display = "none";
  document.querySelector("#divUnosTip").style.display = "none";
  document.querySelector("#divUnosNamjena").style.display = "none";
  document.querySelector("#divUnosMaterijal").style.display = "none";
  document.querySelector("#divUnosVrstaDrvenogStuba").style.display = "none";
  document.querySelector("#divUnosNadmorskaVisina").style.display = "none";
  document.querySelector("#divUnosVisina").style.display = "none";
  document.querySelector("#divUnosRasporedProvodnika").style.display = "none";
  document.querySelector("#divUnosIzolatorVrsta").style.display = "none";
  document.querySelector("#divUnosIzolatorFunkcija").style.display = "none";
  document.querySelector("#divUnosBrIzolFaza").style.display = "none";
  document.querySelector("#divUnosTipIzolatora").style.display = "none";
  document.querySelector("#divUnosOdvodnikPrenapona").style.display = "none";
  document.querySelector("#divUnosUzemljivac").style.display = "none";
  document.querySelector("#divUnosOtporUzemljivaca").style.display = "none";
  document.querySelector("#divUnosOptika").style.display = "none";
  document.querySelector("#divUnosRasvjeta").style.display = "none";
  document.querySelector("#divUnosBrPmo").style.display = "none";
  document.querySelector("#divUnosBrNnv").style.display = "none";
  document.querySelector("#divUnosPogSprem").style.display = "none";
  document.querySelector("#divUnosVlasnistvo").style.display = "none";
  document.querySelector("#divUnosOpstina").style.display = "none";
  document.querySelector("#divUnosNapon").style.display = "none";
  document.querySelector("#divUnosPrikljucakOtcjep").style.display = "none";
  document.querySelector("#divUnosNnVod").style.display = "none";
  document.querySelector("#divUnosRastavljac").style.display = "none";
  document.querySelector("#divUnos10KvVod").style.display = "none";

  document.querySelector("#divUnosNaziv").style.display = "none";
  document.querySelector("#divUnosTs").style.display = "none";
  document.querySelector("#divUnosIzvodTs").style.display = "none";
  document.querySelector("#divUnosBrFaza").style.display = "none";
  document.querySelector("#divUnosVrsta").style.display = "none";
  document.querySelector("#divUnosPresjek").style.display = "none";
  document.querySelector("#divUnosBrSpojnica").style.display = "none";
  document.querySelector("#divUnosGodIzgr").style.display = "none";
  document.querySelector("#divUnosUzePresjek").style.display = "none";
  document.querySelector("#divUnosUze").style.display = "none";

  document.querySelector("#divUnosBrNnIzvoda").style.display = "none";
  document.querySelector("#divUnosCelije10").style.display = "none";
  document.querySelector("#divUnosProjekSnaga").style.display = "none";
  document.querySelector("#divUnosInstSnaga1").style.display = "none";
  document.querySelector("#divUnosInstSnaga2").style.display = "none";
  document.querySelector("#divUnosInstSnaga3").style.display = "none";
  document.querySelector("#divUnosInstSnaga4").style.display = "none";
  document.querySelector("#divUnosPrenosOdnos").style.display = "none";
  document.querySelector("#divUnosIzvodCelija").style.display = "none";
  document.querySelector("#divUnosNapojnaTs").style.display = "none";
  document.querySelector("#divUnosFunkcija").style.display = "none";
  document.querySelector("#divUnosIdBilling").style.display = "none";

  document.querySelector("#divUnosId").style.display = "none";
  document.querySelector("#divUnosOsiguraci").style.display = "none";
  document.querySelector("#divUnosBrPretplatnika").style.display = "none";

  document.querySelector("#divUnosMontaza").style.display = "none";
  document.querySelector("#divUnosVrata").style.display = "none";
  document.querySelector("#divUnosBrIzvoda").style.display = "none";
  document.querySelector("#divUnosBrPrikljucaka").style.display = "none";
}

function prikaziUnosStubove() {
  document.querySelector("#divUnosGps").style.display = "flex";
  document.querySelector("#divUnosBroj").style.display = "flex";
  document.querySelector("#divUnosTip").style.display = "flex";
  document.querySelector("#divUnosNamjena").style.display = "flex";
  document.querySelector("#divUnosMaterijal").style.display = "flex";
  document.querySelector("#divUnosVrstaDrvenogStuba").style.display = "flex";
  document.querySelector("#divUnosNadmorskaVisina").style.display = "flex";
  document.querySelector("#divUnosVisina").style.display = "flex";
  document.querySelector("#divUnosRasporedProvodnika").style.display = "flex";
  document.querySelector("#divUnosIzolatorVrsta").style.display = "flex";
  document.querySelector("#divUnosIzolatorFunkcija").style.display = "flex";
  document.querySelector("#divUnosBrIzolFaza").style.display = "flex";
  document.querySelector("#divUnosTipIzolatora").style.display = "flex";
  document.querySelector("#divUnosOdvodnikPrenapona").style.display = "flex";
  document.querySelector("#divUnosUzemljivac").style.display = "flex";
  document.querySelector("#divUnosOtporUzemljivaca").style.display = "flex";
  document.querySelector("#divUnosOptika").style.display = "flex";
  document.querySelector("#divUnosRasvjeta").style.display = "flex";
  document.querySelector("#divUnosBrPmo").style.display = "flex";
  document.querySelector("#divUnosBrNnv").style.display = "flex";
  document.querySelector("#divUnosPogSprem").style.display = "flex";
  document.querySelector("#divUnosVlasnistvo").style.display = "flex";
  document.querySelector("#divUnosOpstina").style.display = "flex";
  document.querySelector("#divUnosNapon").style.display = "flex";
  document.querySelector("#divUnosPrikljucakOtcjep").style.display = "flex";
  document.querySelector("#divUnosNnVod").style.display = "flex";
  document.querySelector("#divUnosRastavljac").style.display = "flex";
  document.querySelector("#divUnos10KvVod").style.display = "flex";
}

function prikaziUnosVodove() {
  document.querySelector("#divUnosGps").style.display = "flex";
  document.querySelector("#divUnosNapon").style.display = "flex";
  document.querySelector("#divUnosTip").style.display = "flex";
  document.querySelector("#divUnosMaterijal").style.display = "flex";
  document.querySelector("#divUnosRasvjeta").style.display = "flex";
  document.querySelector("#divUnosPogSprem").style.display = "flex";
  document.querySelector("#divUnosVlasnistvo").style.display = "flex";
  document.querySelector("#divUnosOpstina").style.display = "flex";
  document.querySelector("#divUnosNaziv").style.display = "flex";
  document.querySelector("#divUnosTs").style.display = "flex";
  document.querySelector("#divUnosIzvodTs").style.display = "flex";
  document.querySelector("#divUnosBrFaza").style.display = "flex";
  document.querySelector("#divUnosVrsta").style.display = "flex";
  document.querySelector("#divUnosPresjek").style.display = "flex";
  document.querySelector("#divUnosBrSpojnica").style.display = "flex";
  document.querySelector("#divUnosGodIzgr").style.display = "flex";
  document.querySelector("#divUnosUzePresjek").style.display = "flex";
  document.querySelector("#divUnosUze").style.display = "flex";
}

function prikaziUnosTrafostanice() {
  document.querySelector("#divUnosGps").style.display = "flex";
  document.querySelector("#divUnosTip").style.display = "flex";
  document.querySelector("#divUnosNaziv").style.display = "flex";
  document.querySelector("#divUnosGodIzgr").style.display = "flex";
  document.querySelector("#divUnosPogSprem").style.display = "flex";
  document.querySelector("#divUnosVlasnistvo").style.display = "flex";
  document.querySelector("#divUnosOpstina").style.display = "flex";
  document.querySelector("#divUnosBrNnIzvoda").style.display = "flex";
  document.querySelector("#divUnosCelije10").style.display = "flex";
  document.querySelector("#divUnosProjekSnaga").style.display = "flex";
  document.querySelector("#divUnosInstSnaga1").style.display = "flex";
  document.querySelector("#divUnosInstSnaga2").style.display = "flex";
  document.querySelector("#divUnosInstSnaga3").style.display = "flex";
  document.querySelector("#divUnosInstSnaga4").style.display = "flex";
  document.querySelector("#divUnosPrenosOdnos").style.display = "flex";
  document.querySelector("#divUnosIzvodCelija").style.display = "flex";
  document.querySelector("#divUnosNapojnaTs").style.display = "flex";
  document.querySelector("#divUnosFunkcija").style.display = "flex";
  document.querySelector("#divUnosIdBilling").style.display = "flex";
}

function prikaziUnosPrikljucnoMjesto() {
  document.querySelector("#divUnosGps").style.display = "flex";
  document.querySelector("#divUnosNapojnaTs").style.display = "flex";
  document.querySelector("#divUnosIzvodTs").style.display = "flex";
  document.querySelector("#divUnosId").style.display = "flex";
  document.querySelector("#divUnosTip").style.display = "flex";
  document.querySelector("#divUnosOsiguraci").style.display = "none";
  document.querySelector("#divUnosBrPretplatnika").style.display = "none";
  document.querySelector("#divUnosVlasnistvo").style.display = "flex";
  document.querySelector("#divUnosOpstina").style.display = "flex";
  document.querySelector("#divUnosNapon").style.display = "flex";
}

function prikaziUnosNkro() {
  document.querySelector("#divUnosGps").style.display = "flex";
  document.querySelector("#divUnosTs").style.display = "flex";
  document.querySelector("#divUnosIzvodTs").style.display = "flex";
  document.querySelector("#divUnosId").style.display = "flex";
  document.querySelector("#divUnosVlasnistvo").style.display = "flex";
  document.querySelector("#divUnosOpstina").style.display = "flex";
  document.querySelector("#divUnosNapon").style.display = "flex";
  document.querySelector("#divUnosMontaza").style.display = "flex";
  document.querySelector("#divUnosVrata").style.display = "flex";
  document.querySelector("#divUnosBrIzvoda").style.display = "flex";
  document.querySelector("#divUnosBrPrikljucaka").style.display = "flex";
}

/**Metode za unos podataka iz polja */

function unosStubova() {
  idObjekta = "12";
  akcija = "unos";
  geometrijaZaBazuWkt = "POINT (0, 0)";
  let podaciForme = new FormData();
  podaciForme.append("id", idObjekta);
  podaciForme.append("akcija", akcija);
  podaciForme.append("Geometry", geometrijaZaBazuWkt);
  podaciForme.append("fid_1", "");
  podaciForme.append("gps", document.querySelector("#gps").value);
  podaciForme.append("broj", document.querySelector("#broj").value);
  podaciForme.append("tip", document.querySelector("#tip").value);
  podaciForme.append("vrsta_namjena", document.querySelector("#vrsta_namjena").value);
  podaciForme.append("vrsta_materijal", document.querySelector("#vrsta_materijal").value);
  podaciForme.append("vrsta_drvenog", document.querySelector("#vrsta_drvenog").value);
  podaciForme.append("nad_visina", document.querySelector("#nad_visina").value);
  podaciForme.append("visina", document.querySelector("#visina").value);
  podaciForme.append("rasp_prov", document.querySelector("#rasp_prov").value);
  podaciForme.append("izolator_vrsta", document.querySelector("#izolator_vrsta").value);
  podaciForme.append("izolator_funkcija", document.querySelector("#izolator_funkcija").value);
  podaciForme.append("br_izol_faza", document.querySelector("#br_izol_faza").value);
  podaciForme.append("tip_nosac_izol", document.querySelector("#tip_nosac_izol").value);
  podaciForme.append("odvodnik_prenapona", document.querySelector("#odvodnik_prenapona").value);
  podaciForme.append("uzemljivac", document.querySelector("#uzemljivac").value);
  podaciForme.append("uzemljivac_otpor", document.querySelector("#uzemljivac_otpor").value);
  podaciForme.append("optika", document.querySelector("#optika").value);
  podaciForme.append("rasvjeta", document.querySelector("#rasvjeta").value);
  podaciForme.append("br_pmo", document.querySelector("#br_pmo").value);
  podaciForme.append("br_nnv", document.querySelector("#br_nnv").value);
  podaciForme.append("pog_sprem", document.querySelector("#pog_sprem").value);
  podaciForme.append("vlasnistvo", document.querySelector("#vlasnistvo").value);
  podaciForme.append("opstina", document.querySelector("#opstina").value);
  podaciForme.append("napon", document.querySelector("#napon").value);
  podaciForme.append("prikljucak_otcjep", document.querySelector("#prikljucak_otcjep").value);
  podaciForme.append("nn_vod", document.querySelector("#nn_vod").value);
  podaciForme.append("rastavljac", document.querySelector("#rastavljac").value);
  //podaciForme.append("10_vod", document.querySelector("#10_vod").value);

  //Dodao za poziv Jovanovog servisa
  podaciForme.append("name", "test");
  podaciForme.append("visibility", true);
  podaciForme.append("open", true);
  podaciForme.append("address", "");
  podaciForme.append("phoneNumber", "");
  podaciForme.append("Folder", "test");
  podaciForme.append("fid", "test");
  podaciForme.append("br_pmo", 2);
  podaciForme.append("datum_azuriranja", "");

  podaciForme.append("geohash_id", "test");
  podaciForme.append("korisnik", "test");
  podaciForme.append("katastar", "");
  podaciForme.append("originalId", "test");
  podaciForme.append("posjeduje_sliku", "test");
  podaciForme.append("vlasnik", "test");
  podaciForme.append("geohash_id_no", "test");
  podaciForme.append("sifra_napojne", "test");
  podaciForme.append("izvod_napojne", "test");

  console.log("data", podaciForme.elements);

  console.log("putanja servisa", wsServerOriginLocation + "/novi_portal/api/stubovi_store");
  let xhr = new XMLHttpRequest();
  xhr.open("POST", wsServerOriginLocation + "/novi_portal/api/stubovi_store");
  //xhr.open("POST", "http://localhost:8080/test/cedis");
  xhr.timeout = 100000;
  xhr.setRequestHeader("Accept", "application/json");
  xhr.setRequestHeader("Accept", "application/json");
  //xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  xhr.ontimeout = function () {
    poruka("Greska", "Akcija je prekinuta jer je trajala predugo.");
  };
  let jsonSlanje = JSON.stringify('{ fid_1: 1, Geometry: "POINT(0,0)" }');
  //xhr.send(jsonSlanje);
  xhr.send(podaciForme);
  //openModalSpinner();
  xhr.onreadystatechange = function () {
    if (this.readyState === 4) {
      if (this.status === 200) {
        console.log("test", xhr.responseText);
        let jsonResponse = JSON.parse(xhr.responseText);
        if (jsonResponse["success"] === true) {
          poruka("Uspjeh", jsonResponse["message"]);
          //restartovanje();
        } else {
          poruka("Upozorenje", jsonResponse["message"]);
        }
        //closeModalSpinner();
      } else {
        poruka("Greska", xhr.statusText);
        //closeModalSpinner();
      }
    }
  };
}
//console.log("stubovi");
//unosStubova();

function unosVodova() {
  let podaciForme = new FormData();
  podaciForme.append("id", idObjekta);
  podaciForme.append("akcija", akcija);
  podaciForme.append("geom", geometrijaZaBazuWkt);
  podaciForme.append("gps", document.querySelector("#gps").value);
  podaciForme.append("naziv", document.querySelector("#naziv").value);
  podaciForme.append("ts", document.querySelector("#ts").value);
  podaciForme.append("izvod_ts", document.querySelector("#izvod_ts").value);
  podaciForme.append("napon", document.querySelector("#napon").value);
  podaciForme.append("br_faza", document.querySelector("#br_faza").value);
  podaciForme.append("vrsta", document.querySelector("#vrsta").value);
  podaciForme.append("tip", document.querySelector("#tip").value);
  podaciForme.append("presjek", document.querySelector("#presjek").value);
  podaciForme.append("materijal", document.querySelector("#materijal").value);
  podaciForme.append("br_spojnica", document.querySelector("#br_spojnica").value);
  podaciForme.append("rasvjeta", document.querySelector("#rasvjeta").value);
  podaciForme.append("pog_sprem", document.querySelector("#pog_sprem").value);
  podaciForme.append("god_izg", document.querySelector("#god_izg").value);
  podaciForme.append("vlasnistvo", document.querySelector("#vlasnistvo").value);
  podaciForme.append("opstina", document.querySelector("#opstina").value);
  podaciForme.append("uze_presjek", document.querySelector("#uze_presjek").value);
  podaciForme.append("uze", document.querySelector("#uze").value);

  let xhr = new XMLHttpRequest();
  xhr.open("POST", sacuvajZapisUrl, true);
  xhr.timeout = 100000;
  xhr.ontimeout = function () {
    poruka("Greska", "Akcija je prekinuta jer je trajala predugo.");
  };
  xhr.send(podaciForme);
  openModalSpinner();
  xhr.onreadystatechange = function () {
    if (this.readyState === 4) {
      if (this.status === 200) {
        let jsonResponse = JSON.parse(xhr.responseText);
        if (jsonResponse["success"] === true) {
          poruka("Uspjeh", jsonResponse["message"]);
        } else {
          poruka("Upozorenje", jsonResponse["message"]);
        }
        closeModalSpinner();
      } else {
        poruka("Greska", xhr.statusText);
        closeModalSpinner();
      }
    }
  };
}

function unosTrafostanica() {
  let podaciForme = new FormData();
  podaciForme.append("id", idObjekta);
  podaciForme.append("akcija", akcija);
  podaciForme.append("geom", geometrijaZaBazuWkt);
  podaciForme.append("gps", document.querySelector("#gps").value);
  podaciForme.append("id_billing", document.querySelector("#id_billing").value);
  podaciForme.append("naziv", document.querySelector("#naziv").value);
  podaciForme.append("funkcija", document.querySelector("#funkcija").value);
  podaciForme.append("tip", document.querySelector("#tip").value);
  podaciForme.append("napojna_ts", document.querySelector("#napojna_ts").value);
  podaciForme.append("izvod_celija", document.querySelector("#izvod_celija").value);
  podaciForme.append("prenos_odnos", document.querySelector("#prenos_odnos").value);
  podaciForme.append("inst_snaga_t1", document.querySelector("#inst_snaga_t1").value);
  podaciForme.append("inst_snaga_t2", document.querySelector("#inst_snaga_t2").value);
  podaciForme.append("inst_snaga_t3", document.querySelector("#inst_snaga_t3").value);
  podaciForme.append("inst_snaga_t4", document.querySelector("#inst_snaga_t4").value);
  podaciForme.append("projek_snaga", document.querySelector("#projek_snaga").value);
  podaciForme.append("celije_10", document.querySelector("#celije_10").value);
  podaciForme.append("br_nn_izvoda", document.querySelector("#br_nn_izvoda").value);
  podaciForme.append("god_izg", document.querySelector("#god_izg").value);
  podaciForme.append("pog_sprem", document.querySelector("#pog_sprem").value);
  podaciForme.append("vlasnistvo", document.querySelector("#vlasnistvo").value);
  podaciForme.append("opstina", document.querySelector("#opstina").value);

  let xhr = new XMLHttpRequest();
  xhr.open("POST", sacuvajZapisUrl, true);
  xhr.timeout = 100000;
  xhr.ontimeout = function () {
    poruka("Greska", "Akcija je prekinuta jer je trajala predugo.");
  };
  xhr.send(podaciForme);
  openModalSpinner();
  xhr.onreadystatechange = function () {
    if (this.readyState === 4) {
      if (this.status === 200) {
        let jsonResponse = JSON.parse(xhr.responseText);
        if (jsonResponse["success"] === true) {
          poruka("Uspjeh", jsonResponse["message"]);
        } else {
          poruka("Upozorenje", jsonResponse["message"]);
        }
        closeModalSpinner();
      } else {
        poruka("Greska", xhr.statusText);
        closeModalSpinner();
      }
    }
  };
}

function unosNkro() {
  let podaciForme = new FormData();
  podaciForme.append("id", idObjekta);
  podaciForme.append("akcija", akcija);
  podaciForme.append("geom", geometrijaZaBazuWkt);
  podaciForme.append("gps", document.querySelector("#gps").value);
  podaciForme.append("ts", document.querySelector("#ts").value);
  podaciForme.append("izvod_ts", document.querySelector("#izvod_ts").value);
  podaciForme.append("id", document.querySelector("#id").value);
  podaciForme.append("materijal", document.querySelector("#materijal").value);
  podaciForme.append("montaza", document.querySelector("#montaza").value);
  podaciForme.append("vrata", document.querySelector("#vrata").value);
  podaciForme.append("br_izvoda", document.querySelector("#br_izvoda").value);
  podaciForme.append("br_prikljucaka", document.querySelector("#br_prikljucaka").value);
  podaciForme.append("pog_sprem", document.querySelector("#pog_sprem").value);
  podaciForme.append("vlasnistvo", document.querySelector("#vlasnistvo").value);
  podaciForme.append("opstina", document.querySelector("#opstina").value);
  podaciForme.append("napon", document.querySelector("#napon").value);
  podaciForme.append("", document.querySelector("#").value);

  let xhr = new XMLHttpRequest();
  xhr.open("POST", sacuvajZapisUrl, true);
  xhr.timeout = 100000;
  xhr.ontimeout = function () {
    poruka("Greska", "Akcija je prekinuta jer je trajala predugo.");
  };
  xhr.send(podaciForme);
  openModalSpinner();
  xhr.onreadystatechange = function () {
    if (this.readyState === 4) {
      if (this.status === 200) {
        let jsonResponse = JSON.parse(xhr.responseText);
        if (jsonResponse["success"] === true) {
          poruka("Uspjeh", jsonResponse["message"]);
        } else {
          poruka("Upozorenje", jsonResponse["message"]);
        }
        closeModalSpinner();
      } else {
        poruka("Greska", xhr.statusText);
        closeModalSpinner();
      }
    }
  };
}

function unosPrikljucnoMjesto() {
  let podaciForme = new FormData();
  podaciForme.append("id", idObjekta);
  podaciForme.append("akcija", akcija);
  podaciForme.append("geom", geometrijaZaBazuWkt);
  podaciForme.append("gps", document.querySelector("#gps").value);
  podaciForme.append("ts", document.querySelector("#ts").value);
  podaciForme.append("izvod_ts", document.querySelector("#izvod_ts").value);
  podaciForme.append("id", document.querySelector("#id").value);
  podaciForme.append("tip", document.querySelector("#tip").value);
  podaciForme.append("osiguraci", document.querySelector("#osiguraci").value);
  podaciForme.append("br_pretplatnika", document.querySelector("#br_pretplatnika").value);
  podaciForme.append("vlasnistvo", document.querySelector("#vlasnistvo").value);
  podaciForme.append("opstina", document.querySelector("#opstina").value);
  podaciForme.append("napon", document.querySelector("#napon").value);

  let xhr = new XMLHttpRequest();
  xhr.open("POST", sacuvajZapisUrl, true);
  xhr.timeout = 100000;
  xhr.ontimeout = function () {
    poruka("Greska", "Akcija je prekinuta jer je trajala predugo.");
  };
  xhr.send(podaciForme);
  openModalSpinner();
  xhr.onreadystatechange = function () {
    if (this.readyState === 4) {
      if (this.status === 200) {
        let jsonResponse = JSON.parse(xhr.responseText);
        if (jsonResponse["success"] === true) {
          poruka("Uspjeh", jsonResponse["message"]);
        } else {
          poruka("Upozorenje", jsonResponse["message"]);
        }
        closeModalSpinner();
      } else {
        poruka("Greska", xhr.statusText);
        closeModalSpinner();
      }
    }
  };
}

/**Metode za popunjavanje polja atributima iz baze */

function popuniPoljaStubovi(odgovor) {
  let atributi = odgovor.features[0]["properties"];
  idObjekta = atributi["id"];
  document.querySelector("#gps").value = atributi["gps"];
  document.querySelector("#broj").value = atributi["broj"];
  document.querySelector("#nad_visina").value = atributi["nad_visina"];
  document.querySelector("#visina").value = atributi["visina"];
  document.querySelector("#rasp_prov").value = atributi["rasp_prov"];
  document.querySelector("#br_izol_faza").value = atributi["br_izol_faza"];
  document.querySelector("#uzemljivac_otpor").value = atributi["uzemljivac_otpor"];
  document.querySelector("#br_pmo").value = atributi["br_pmo"];
  document.querySelector("#br_nnv").value = atributi["br_nnv"];
  document.querySelector("#pog_sprem").value = atributi["pog_sprem"];
  document.querySelector("#opstina").value = atributi["opstina"];
  document.querySelector("#napon").value = atributi["napon"];

  setujDdlVrijednost("#tip", atributi["tip"]);
  setujDdlVrijednost("#vrsta_namjena", atributi["vrsta_namjena"]);
  setujDdlVrijednost("#vrsta_materijal", atributi["vrsta_materijal"]);
  setujDdlVrijednost("#vrsta_drvenog", atributi["vrsta_drvenog"]);
  setujDdlVrijednost("#izolator_vrsta", atributi["izolator_vrsta"]);
  setujDdlVrijednost("#izolator_funkcija", atributi["izolator_funkcija"]);
  setujDdlVrijednost("#tip_nosac_izol", atributi["tip_nosac_izol"]);
  setujDdlVrijednost("#odvodnik_prenapona", atributi["odvodnik_prenapona"]);
  setujDdlVrijednost("#uzemljivac", atributi["uzemljivac"]);
  setujDdlVrijednost("#optika", atributi["optika"]);
  setujDdlVrijednost("#rasvjeta", atributi["rasvjeta"]);
  setujDdlVrijednost("#vlasnistvo", atributi["vlasnistvo"]);
  setujDdlVrijednost("#prikljucak_otcjep", atributi["prikljucak_otcjep"]);
  setujDdlVrijednost("#nn_vod", atributi["nn_vod"]);
  setujDdlVrijednost("#rastavljac", atributi["rastavljac"]);
  setujDdlVrijednost("#10_vod", atributi["10_vod"]);

  /*if (akcija === "izmijeni") {
    wfsZaEdit(idObjekta);
  }*/
}

function popuniPoljaVodovi(odgovor) {
  let atributi = odgovor.features[0]["properties"];
  idObjekta = atributi["id"];
  document.querySelector("#idObjekta").value = idObjekta;
  document.querySelector("#gps").value = atributi["gps"];
  document.querySelector("#naziv").value = atributi["naziv"];
  document.querySelector("#ts").value = atributi["ts"];
  document.querySelector("#izvod_ts").value = atributi["izvod_ts"];
  document.querySelector("#napon").value = atributi["napon"];
  document.querySelector("#br_spojnica").value = atributi["br_spojnica"];
  document.querySelector("#god_izg").value = atributi["god_izg"];

  setujDdlVrijednost("#br_faza", atributi["br_faza"]);
  setujDdlVrijednost("#vrsta", atributi["vrsta"]);
  setujDdlVrijednost("#tip", atributi["tip"]);
  setujDdlVrijednost("#presjek", atributi["presjek"]);
  setujDdlVrijednost("#materijal", atributi["materijal"]);
  setujDdlVrijednost("#rasvjeta", atributi["rasvjeta"]);
  setujDdlVrijednost("#pog_sprem", atributi["pog_sprem"]);
  setujDdlVrijednost("#vlasnistvo", atributi["vlasnistvo"]);
  setujDdlVrijednost("#opstina", atributi["opstina"]);
  setujDdlVrijednost("#uze_presjek", atributi["uze_presjek"]);
  setujDdlVrijednost("#uze", atributi["uze"]);

  /*if (akcija === "izmijeni") {
    wfsZaEdit(idObjekta);
  }*/
}

function popuniPoljaTrafostanice(odgovor) {
  let atributi = odgovor.features[0]["properties"];
  idObjekta = atributi["id"];
  document.querySelector("#idObjekta").value = idObjekta;
  document.querySelector("#gps").value = atributi["gps"];
  document.querySelector("#id_billing").value = atributi["id_billing"];
  document.querySelector("#naziv").value = atributi["naziv"];
  document.querySelector("#napojna_ts").value = atributi["napojna_ts"];
  document.querySelector("#izvod_celija").value = atributi["izvod_celija"];
  document.querySelector("#projek_snaga").value = atributi["projek_snaga"];
  document.querySelector("#celije_10").value = atributi["celije_10"];
  document.querySelector("#br_nn_izvoda").value = atributi["br_nn_izvoda"];
  document.querySelector("#god_izg").value = atributi["god_izg"];
  document.querySelector("#pog_sprem").value = atributi["pog_sprem"];

  setujDdlVrijednost("#funkcija", atributi["funkcija"]);
  setujDdlVrijednost("#tip", atributi["tip"]);
  setujDdlVrijednost("#prenos_odnos", atributi["prenos_odnos"]);
  setujDdlVrijednost("#inst_snaga_t1", atributi["inst_snaga_t1"]);
  setujDdlVrijednost("#inst_snaga_t2", atributi["inst_snaga_t2"]);
  setujDdlVrijednost("#inst_snaga_t3", atributi["inst_snaga_t3"]);
  setujDdlVrijednost("#inst_snaga_t4", atributi["inst_snaga_t4"]);
  setujDdlVrijednost("#vlasnistvo", atributi["vlasnistvo"]);
  setujDdlVrijednost("#opstina", atributi["opstina"]);

  /*if (akcija === "izmijeni") {
    wfsZaEdit(idObjekta);
  }*/
}

function popuniPoljaNkro(odgovor) {
  let atributi = odgovor.features[0]["properties"];
  idObjekta = atributi["id"];
  document.querySelector("#idObjekta").value = idObjekta;
  document.querySelector("#gps").value = atributi["gps"];
  document.querySelector("#id_billing").value = atributi["id_billing"];
  document.querySelector("#naziv").value = atributi["naziv"];
  document.querySelector("#napojna_ts").value = atributi["napojna_ts"];
  document.querySelector("#izvod_celija").value = atributi["izvod_celija"];
  document.querySelector("#projek_snaga").value = atributi["projek_snaga"];
  document.querySelector("#celije_10").value = atributi["celije_10"];
  document.querySelector("#br_nn_izvoda").value = atributi["br_nn_izvoda"];
  document.querySelector("#god_izg").value = atributi["god_izg"];
  document.querySelector("#pog_sprem").value = atributi["pog_sprem"];

  setujDdlVrijednost("#funkcija", atributi["funkcija"]);
  setujDdlVrijednost("#tip", atributi["tip"]);
  setujDdlVrijednost("#prenos_odnos", atributi["prenos_odnos"]);
  setujDdlVrijednost("#inst_snaga_t1", atributi["inst_snaga_t1"]);
  setujDdlVrijednost("#inst_snaga_t2", atributi["inst_snaga_t2"]);
  setujDdlVrijednost("#inst_snaga_t3", atributi["inst_snaga_t3"]);
  setujDdlVrijednost("#inst_snaga_t4", atributi["inst_snaga_t4"]);
  setujDdlVrijednost("#vlasnistvo", atributi["vlasnistvo"]);
  setujDdlVrijednost("#opstina", atributi["opstina"]);

  /*if (akcija === "izmijeni") {
    wfsZaEdit(idObjekta);
  }*/
}

function popuniPoljaPrikljucnoMjesto(odgovor) {
  let atributi = odgovor.features[0]["properties"];
  idObjekta = atributi["id"];
  document.querySelector("#idObjekta").value = idObjekta;
  document.querySelector("#gps").value = atributi["gps"];
  document.querySelector("#ts").value = atributi["ts"];
  document.querySelector("#izvod_ts").value = atributi["izvod_ts"];
  document.querySelector("#id").value = atributi["id"];
  document.querySelector("#tip").value = atributi["tip"];
  document.querySelector("#osiguraci").value = atributi["osiguraci"];
  document.querySelector("#br_pretplatnika").value = atributi["br_pretplatnika"];
  document.querySelector("#vlasnistvo").value = atributi["vlasnistvo"];
  document.querySelector("#opstina").value = atributi["opstina"];
  document.querySelector("#napon").value = atributi["napon"];

  setujDdlVrijednost("#osiguraci", atributi["osiguraci"]);
  setujDdlVrijednost("#vlasnistvo", atributi["vlasnistvo"]);
  setujDdlVrijednost("#opstina", atributi["opstina"]);

  /*if (akcija === "izmijeni") {
    wfsZaEdit(idObjekta);
  }*/
}

function testunosPrikljucnoMjesto() {
  let podaciForme = new FormData();
  podaciForme.append("id", 1);
  podaciForme.append("akcija", "unos");
  podaciForme.append("Geometry", "POINT (0,0)");
  podaciForme.append("fid_1", "1");
  podaciForme.append("gps", "");
  podaciForme.append("ts", "");
  podaciForme.append("izvod_ts", "");
  podaciForme.append("id", "");
  podaciForme.append("tip", "");
  podaciForme.append("osiguraci", "");
  podaciForme.append("br_pretplatnika", "");
  podaciForme.append("vlasnistvo", "");
  podaciForme.append("opstina", "");
  podaciForme.append("napon", "");
  //Dodao za poziv Jovanovog servisa
  podaciForme.append("name", "test");
  podaciForme.append("visibility", true);
  podaciForme.append("open", true);
  podaciForme.append("address", "");
  podaciForme.append("phoneNumber", "");
  podaciForme.append("Folder", "test");
  podaciForme.append("fid", "test");
  podaciForme.append("datum_azuriranja", "");

  podaciForme.append("geohash_id", "test");
  podaciForme.append("korisnik", "test");
  podaciForme.append("katastar", "");
  podaciForme.append("originalId", "test");
  podaciForme.append("posjeduje_sliku", "test");
  podaciForme.append("vlasnik", "test");
  podaciForme.append("geohash_id_no", "test");
  podaciForme.append("sifra_napojne", "test");
  podaciForme.append("izvod_napojne", "test");

  console.log("podaci forme", podaciForme.values());

  let xhr = new XMLHttpRequest();
  xhr.open("POST", wsServerOriginLocation + "/novi_portal/api/prikljucno_mjesto_store", true);
  xhr.timeout = 100000;
  xhr.setRequestHeader("Accept", "application/json");
  xhr.setRequestHeader("Content-Type", "multipart/form-data");
  xhr.ontimeout = function () {
    poruka("Greska", "Akcija je prekinuta jer je trajala predugo.");
  };
  xhr.send(podaciForme);
  openModalSpinner();
  xhr.onreadystatechange = function () {
    if (this.readyState === 4) {
      if (this.status === 200) {
        console.log("odgovor servisa", xhr.responseText);
        let jsonResponse = JSON.parse(xhr.responseText);
        if (jsonResponse["success"] === true) {
          poruka("Uspjeh", jsonResponse["message"]);
        } else {
          poruka("Upozorenje", jsonResponse["message"]);
        }
        closeModalSpinner();
      } else {
        poruka("Greska", xhr.statusText);
        closeModalSpinner();
      }
    }
  };
}

//console.log("prikljucnomjesto");
//testunosPrikljucnoMjesto();

function unosStubova1() {
  idObjekta = "12";
  akcija = "unos";
  geometrijaZaBazuWkt = "POINT (0, 0)";
  let podaciForme = new FormData();
  podaciForme.append("id", idObjekta);
  podaciForme.append("akcija", akcija);
  podaciForme.append("Geometry", geometrijaZaBazuWkt);
  podaciForme.append("fid_1", "");
  podaciForme.append("gps", document.querySelector("#gps").value);
  podaciForme.append("broj", document.querySelector("#broj").value);
  podaciForme.append("tip", document.querySelector("#tip").value);
  podaciForme.append("vrsta_namjena", document.querySelector("#vrsta_namjena").value);
  podaciForme.append("vrsta_materijal", document.querySelector("#vrsta_materijal").value);
  podaciForme.append("vrsta_drvenog", document.querySelector("#vrsta_drvenog").value);
  podaciForme.append("nad_visina", document.querySelector("#nad_visina").value);
  podaciForme.append("visina", document.querySelector("#visina").value);
  podaciForme.append("rasp_prov", document.querySelector("#rasp_prov").value);
  podaciForme.append("izolator_vrsta", document.querySelector("#izolator_vrsta").value);
  podaciForme.append("izolator_funkcija", document.querySelector("#izolator_funkcija").value);
  podaciForme.append("br_izol_faza", document.querySelector("#br_izol_faza").value);
  podaciForme.append("tip_nosac_izol", document.querySelector("#tip_nosac_izol").value);
  podaciForme.append("odvodnik_prenapona", document.querySelector("#odvodnik_prenapona").value);
  podaciForme.append("uzemljivac", document.querySelector("#uzemljivac").value);
  podaciForme.append("uzemljivac_otpor", document.querySelector("#uzemljivac_otpor").value);
  podaciForme.append("optika", document.querySelector("#optika").value);
  podaciForme.append("rasvjeta", document.querySelector("#rasvjeta").value);
  podaciForme.append("br_pmo", document.querySelector("#br_pmo").value);
  podaciForme.append("br_nnv", document.querySelector("#br_nnv").value);
  podaciForme.append("pog_sprem", document.querySelector("#pog_sprem").value);
  podaciForme.append("vlasnistvo", document.querySelector("#vlasnistvo").value);
  podaciForme.append("opstina", document.querySelector("#opstina").value);
  podaciForme.append("napon", document.querySelector("#napon").value);
  podaciForme.append("prikljucak_otcjep", document.querySelector("#prikljucak_otcjep").value);
  podaciForme.append("nn_vod", document.querySelector("#nn_vod").value);
  podaciForme.append("rastavljac", document.querySelector("#rastavljac").value);
  //podaciForme.append("10_vod", document.querySelector("#10_vod").value);

  //Dodao za poziv Jovanovog servisa
  podaciForme.append("name", "test");
  podaciForme.append("visibility", true);
  podaciForme.append("open", true);
  podaciForme.append("address", "");
  podaciForme.append("phoneNumber", "");
  podaciForme.append("Folder", "test");
  podaciForme.append("fid", "test");
  podaciForme.append("br_pmo", 2);
  podaciForme.append("datum_azuriranja", "");

  podaciForme.append("geohash_id", "test");
  podaciForme.append("korisnik", "test");
  podaciForme.append("katastar", "");
  podaciForme.append("originalId", "test");
  podaciForme.append("posjeduje_sliku", "test");
  podaciForme.append("vlasnik", "test");
  podaciForme.append("geohash_id_no", "test");
  podaciForme.append("sifra_napojne", "test");
  podaciForme.append("izvod_napojne", "test");

  console.log("podaciForme.elements", podaciForme.elements);

  console.log("putanja servisa", wsServerOriginLocation + "/novi_portal/api/stubovi_store");
  let jsonSlanje = JSON.stringify('{ fid_1: 1, Geometry: "POINT(0,0)" }');
  //xhr.send(jsonSlanje);

  $.ajax({
    url: wsServerOriginLocation + "/novi_portal/api/stubovi_store",
    method: "post",
    data: podaciForme,
    processData: false,
    contentType: false,
    success: function (response) {
      console.log("success", response);
    },
    error: function (response) {
      console.log("error", response);
    },
  });
}
console.log("stubovi");
unosStubova1();
